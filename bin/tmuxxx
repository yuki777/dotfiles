#!/bin/bash

# https://gist.github.com/3022478
# mkdir -p ~/bin; cd ~/bin
# wget "https://gist.githubusercontent.com/yuki777/40c19ae62081df634958/raw/c633f6b8f3943aad917dd8ce7ddbaf7745f665ae/tmuxxx"
# chmod 744 tmuxx

print_help(){
    echo ' ex1 : tmuxxx'
    echo '   if exists "default" session, attach "default" session.'
    echo '   if NOT exists "default" session, make "default" session.'
    echo ' ex2 : tmuxx hoge'
    echo '   if exists "hoge" session, attach "hoge" session.'
    echo '   if NOT exists "hoge" session, make "hoge" session.'
    exit
}

run_tmux(){
    if [ `tmux ls 2>/dev/null |grep "$1: "|wc -l` -eq 1 ];then
        tmux -u attach -t $1
    else
        tmux -u new -s $1
    fi
}

if [ "$1" = "--help" ];then
    print_help
elif [ "$1" = "" ];then
    run_tmux "default"
else
    run_tmux "$1"
fi
